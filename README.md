# ë³´í—˜ê¸ˆ ì²­êµ¬ ìë™ ì‹¬ì‚¬ ì‹œìŠ¤í…œ v3

AI ëª¨ë¸ ì•™ìƒë¸”ì„ í™œìš©í•œ ë³´í—˜ê¸ˆ ì²­êµ¬ ìë™í™” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
n8n ì›Œí¬í”Œë¡œìš° ì—”ì§„ ê¸°ë°˜ìœ¼ë¡œ 3ê°œì˜ AI ëª¨ë¸(GPT-4o, Claude Sonnet 4, Gemini 1.5 Pro)ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ì—¬
OCR ê²°ê³¼ë¥¼ í†µí•©í•˜ê³ , ë³´í—˜ ì•½ê´€ì„ ë¶„ì„í•˜ì—¬ ìë™ìœ¼ë¡œ ë³´í—˜ê¸ˆ ì‹¬ì‚¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

### 1. **AI ì•™ìƒë¸” OCR**
- GPT-4o, Claude Sonnet 4, Gemini 1.5 Pro 3ê°œ ëª¨ë¸ ë³‘ë ¬ ì‹¤í–‰
- ê°€ì¤‘ íˆ¬í‘œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìµœì ì˜ OCR ê²°ê³¼ ì„ íƒ
- ëª¨ë¸ë³„ ì •í™•ë„ í†µê³„ ê¸°ë°˜ ë™ì  ê°€ì¤‘ì¹˜ ì ìš©

### 2. **ìë™/ìˆ˜ë™ ê²€ì¦ í•˜ì´ë¸Œë¦¬ë“œ**
- ì‹ ë¢°ë„ 85% ì´ìƒ: ìë™ ìŠ¹ì¸
- ì‹ ë¢°ë„ ë¯¸ë‹¬: ìˆ˜ë™ ê²€ì¦ ëŒ€ê¸°ì—´
- ê²€ì¦ì í”¼ë“œë°±ì„ í†µí•œ ëª¨ë¸ ì„±ëŠ¥ ê°œì„ 

### 3. **ë³´í—˜ ì•½ê´€ ìë™ ë¶„ì„**
- 3ê°œ AI ëª¨ë¸ë¡œ ë‹´ë³´ ë¶„ì„ (Union ë°©ì‹)
- ì ìš© ê°€ëŠ¥í•œ ë‹´ë³´ ìë™ ì¶”ì¶œ
- ê³„ì•½ ìœ íš¨ì„± ê²€ì¦ (ë³´ì¥ê¸°ê°„, ë‚©ì…ìƒíƒœ ë“±)

### 4. **AI ìë™ ì‹¬ì‚¬**
- ì§„ë‹¨ ì •ë³´, ì²­êµ¬ ê¸ˆì•¡, ì ìš© ë‹´ë³´ë¥¼ ì¢…í•© ë¶„ì„
- ë‹´ë³´ë³„ ì§€ê¸‰ ì—¬ë¶€ ë° ê¸ˆì•¡ ìë™ ì‚°ì¶œ
- ìœ„í—˜ ì‹ í˜¸ íƒì§€ (ì¤‘ë³µ ì²­êµ¬, ì´ìƒ íŒ¨í„´ ë“±)

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (ì„ íƒ)                          â”‚
â”‚                    React / Vue / Next.js                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend API Server                              â”‚
â”‚                Node.js + Express + TypeScript                    â”‚
â”‚                     (Port: 3000)                                 â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚                    â”‚
      â”‚ Webhook            â”‚ PostgreSQL         â”‚ Redis
      â”‚                    â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    n8n     â”‚    â”‚   PostgreSQL   â”‚    â”‚   Redis    â”‚
â”‚ Workflow   â”‚    â”‚   Database     â”‚    â”‚   Cache    â”‚
â”‚  Engine    â”‚    â”‚  (Port: 5432)  â”‚    â”‚ (Port:6379)â”‚
â”‚(Port: 5678)â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ AI API Calls (ë³‘ë ¬)
      â”‚
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                             â”‚
â–¼                  â–¼                          â–¼
GPT-4o          Claude                     Gemini
(OpenAI)      (Anthropic)                (Google)
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Runtime**: Node.js 20
- **Framework**: Express.js
- **Language**: TypeScript
- **Database**: PostgreSQL 16
- **Cache**: Redis 7
- **Workflow**: n8n (latest)

### Infrastructure
- **Container**: Docker & Docker Compose
- **Monitoring**: Winston (logging)
- **Security**: Helmet, CORS, Rate Limiting

### AI Models
- **OpenAI**: GPT-4o (OCR, ë‹´ë³´ë¶„ì„, ì‹¬ì‚¬)
- **Anthropic**: Claude Sonnet 4 (OCR, ë‹´ë³´ë¶„ì„)
- **Google**: Gemini 1.5 Pro (OCR, ë‹´ë³´ë¶„ì„)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì‚¬ì „ ì¤€ë¹„

- Docker & Docker Compose ì„¤ì¹˜
- AI API í‚¤ ë°œê¸‰
  - OpenAI API Key
  - Anthropic API Key
  - Google Gemini API Key

### 2. í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì •

```bash
cd insurTech

# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
cp .env.example .env

# .env íŒŒì¼ì— AI API í‚¤ ì…ë ¥
# OPENAI_API_KEY=sk-...
# ANTHROPIC_API_KEY=sk-ant-...
# GOOGLE_API_KEY=AIza...
```

### 3. Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰

```bash
docker-compose up -d
```

### 4. ì„œë¹„ìŠ¤ í™•ì¸

- **Backend API**: http://localhost:3000
- **n8n**: http://localhost:5678 (admin / admin123)
- **PgAdmin**: http://localhost:5050 (admin@insurtech.com / admin123)
- **Health Check**: http://localhost:3000/health

### 5. n8n ì›Œí¬í”Œë¡œìš° ì„í¬íŠ¸

1. n8n ì ‘ì†: http://localhost:5678
2. ë¡œê·¸ì¸: admin / admin123
3. ìƒˆ ì›Œí¬í”Œë¡œìš° ìƒì„±
4. `ë³´í—˜ê¸ˆ_ì²­êµ¬_ìë™_ì‹¬ì‚¬_ì‹œìŠ¤í…œ_v3.json` íŒŒì¼ ì„í¬íŠ¸
5. Credentials ì„¤ì •:
   - OpenAI: HTTP Header Auth (Authorization: Bearer YOUR_API_KEY)
   - Anthropic: HTTP Header Auth (x-api-key: YOUR_API_KEY)
   - Gemini: HTTP Query Auth (key: YOUR_API_KEY)
   - PostgreSQL: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ ì…ë ¥
6. ì›Œí¬í”Œë¡œìš° í™œì„±í™”

---

## ğŸ“¡ API ì‚¬ìš© ì˜ˆì œ

### 1. ì²­êµ¬ì„œ ì œì¶œ

```bash
curl -X POST http://localhost:3000/api/claims \
  -H "Content-Type: application/json" \
  -d '{
    "policy_id": "POL-2024-001",
    "customer_name": "í™ê¸¸ë™",
    "customer_birth": "1990-01-15",
    "customer_phone": "010-1234-5678",
    "diagnosis_base64": "...",
    "receipt_base64": "..."
  }'
```

### 2. ì²­êµ¬ì„œ ì¡°íšŒ

```bash
curl http://localhost:3000/api/claims/CLM-2024-TEST-001
```

### 3. ê²€ì¦ ëŒ€ê¸° ëª©ë¡ ì¡°íšŒ

```bash
curl http://localhost:3000/api/claims/verification-queue/list
```

### 4. AI ëª¨ë¸ í†µê³„ ì¡°íšŒ

```bash
curl http://localhost:3000/api/stats/models
```

### 5. ëŒ€ì‹œë³´ë“œ í†µê³„

```bash
curl http://localhost:3000/api/stats/dashboard
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
insurTech/
â”œâ”€â”€ backend/                      # Backend API ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/         # ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ routes/              # ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ database/            # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ middlewares/         # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ server.ts            # ì„œë²„ ì—”íŠ¸ë¦¬
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ database/                     # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ schema.sql               # í…Œì´ë¸” ì •ì˜
â”‚   â””â”€â”€ mock_data.sql            # Mock ë°ì´í„°
â”‚
â”œâ”€â”€ mock-data/                    # Mock ë°ì´í„° ìƒ˜í”Œ
â”‚   â””â”€â”€ sample_claim_request.json
â”‚
â”œâ”€â”€ n8n/
â”‚   â””â”€â”€ workflows/               # n8n ì›Œí¬í”Œë¡œìš° JSON
â”‚
â”œâ”€â”€ docker-compose.yml           # Docker Compose ì„¤ì •
â”œâ”€â”€ .env.example                 # í™˜ê²½ë³€ìˆ˜ ìƒ˜í”Œ
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 1. insurance_policies (ë³´í—˜ì¦ê¶Œ)
- ë³´í—˜ ì¦ê¶Œ ì •ë³´ ë° ì•½ê´€ ì „ë¬¸

### 2. claim_verification_queue (ê²€ì¦ ëŒ€ê¸°ì—´)
- OCR ê²°ê³¼ ê²€ì¦ì´ í•„ìš”í•œ ì²­êµ¬ ê±´

### 3. ai_model_feedback (AI ëª¨ë¸ í”¼ë“œë°±)
- ëª¨ë¸ë³„ ì •í™•ë„ í‰ê°€ ë°ì´í„°

### 4. claim_review_results (ì²­êµ¬ ì‹¬ì‚¬ ê²°ê³¼)
- ìµœì¢… ì‹¬ì‚¬ ê²°ê³¼ ë° ì§€ê¸‰ ê¸ˆì•¡

### 5. coverage_definitions (ë‹´ë³´ ì •ì˜)
- ë³´í—˜ ìƒí’ˆë³„ ë‹´ë³´ ì •ë³´

### 6. workflow_error_logs (ì—ëŸ¬ ë¡œê·¸)
- ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì¤‘ ë°œìƒí•œ ì—ëŸ¬

---

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### Backend API ë¡œì»¬ ì‹¤í–‰

```bash
cd backend

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ëª¨ë“œ ì‹¤í–‰
npm run dev

# ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ì‹¤í–‰
npm start
```

### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# PostgreSQL ì»¨í…Œì´ë„ˆ ì ‘ì†
docker exec -it insurtech-postgres psql -U insurtech_user -d insurtech

# ìŠ¤í‚¤ë§ˆ ì¬ìƒì„±
\i /docker-entrypoint-initdb.d/01-schema.sql
\i /docker-entrypoint-initdb.d/02-mock_data.sql
```

---

## ğŸ“Š ì²˜ë¦¬ í”Œë¡œìš°

1. **ì²­êµ¬ì„œ ì œì¶œ** â†’ API ì„œë²„ê°€ n8n Webhook í˜¸ì¶œ
2. **íŒŒì¼ ì „ì²˜ë¦¬** â†’ Base64 ê²€ì¦, í•„ìˆ˜ í•„ë“œ ì²´í¬
3. **OCR ë³‘ë ¬ ì‹¤í–‰** â†’ GPT, Claude, Gemini ë™ì‹œ ì‹¤í–‰
4. **OCR ì•™ìƒë¸”** â†’ ê°€ì¤‘ íˆ¬í‘œë¡œ ìµœì  ê²°ê³¼ ì„ íƒ
5. **ê²€ì¦ ë¶„ê¸°**
   - ì‹ ë¢°ë„ ë†’ìŒ â†’ ìë™ ìŠ¹ì¸
   - ì‹ ë¢°ë„ ë‚®ìŒ â†’ ìˆ˜ë™ ê²€ì¦ ëŒ€ê¸°
6. **ê³„ì•½ ê²€ì¦** â†’ ë³´ì¥ê¸°ê°„, ë‚©ì…ìƒíƒœ í™•ì¸
7. **ë‹´ë³´ ë¶„ì„** â†’ 3ê°œ ëª¨ë¸ë¡œ ì ìš© ê°€ëŠ¥ ë‹´ë³´ ì¶”ì¶œ
8. **AI ìë™ ì‹¬ì‚¬** â†’ ì§€ê¸‰ ì—¬ë¶€ ë° ê¸ˆì•¡ ì‚°ì¶œ
9. **ê²°ê³¼ ì €ì¥ ë° ì‘ë‹µ** â†’ DB ì €ì¥, ì½œë°± ì „ì†¡

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. API ë¹„ìš©
- í•œ ê±´ë‹¹ ìµœì†Œ **7íšŒ AI API í˜¸ì¶œ** ë°œìƒ
  - OCR: 3íšŒ (GPT + Claude + Gemini)
  - ë‹´ë³´ë¶„ì„: 3íšŒ
  - ìµœì¢… ì‹¬ì‚¬: 1íšŒ (GPT)
- **ì‹¤ì œ ìš´ì˜ ì‹œ ë¹„ìš© ìµœì í™” í•„ìš”**

### 2. Base64 ì´ë¯¸ì§€ í¬ê¸°
- ì´ë¯¸ì§€ëŠ” **4MB ì´í•˜** ê¶Œì¥
- ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ëŠ” S3 ë“± ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ê¶Œì¥

### 3. ì•½ê´€ í…ìŠ¤íŠ¸
- `insurance_policies.policy_terms_text`ì— ì•½ê´€ ì „ë¬¸ í•„ìˆ˜
- ë‹´ë³´ ë¶„ì„ì´ ì •í™•í•˜ë ¤ë©´ ìƒì„¸í•œ ì•½ê´€ í•„ìš”

### 4. Mock ë°ì´í„°
- í˜„ì¬ëŠ” Mock ë°ì´í„° ì‚¬ìš©
- ì‹¤ì œ ì§„ë‹¨ì„œ/ì˜ìˆ˜ì¦ ì´ë¯¸ì§€ëŠ” ë³„ë„ ì¤€ë¹„ í•„ìš”

### 5. ë³´ì•ˆ
- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ”:
  - JWT Secret ê°•ë ¥í•˜ê²Œ ë³€ê²½
  - API Key í™˜ê²½ë³€ìˆ˜ë¡œ ë¶„ë¦¬
  - HTTPS ì ìš©
  - Rate Limiting ê°•í™”

---

## ğŸ” ë³´ì•ˆ ì„¤ì •

### í”„ë¡œë•ì…˜ í™˜ê²½ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `.env` íŒŒì¼ ë³´ì•ˆ (gitì— ì»¤ë°‹ ê¸ˆì§€)
- [ ] JWT Secret ê°•ë ¥í•œ ê°’ìœ¼ë¡œ ë³€ê²½
- [ ] AI API Key í™˜ê²½ë³€ìˆ˜ ë¶„ë¦¬
- [ ] PostgreSQL ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- [ ] n8n ê¸°ë³¸ ê³„ì • ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- [ ] CORS Origin íŠ¹ì • ë„ë©”ì¸ìœ¼ë¡œ ì œí•œ
- [ ] HTTPS/SSL ì¸ì¦ì„œ ì ìš©
- [ ] Rate Limiting ì„¤ì •
- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì„¤ì •

---

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆ ë° PRì€ ì–¸ì œë“ ì§€ í™˜ì˜í•©ë‹ˆë‹¤!

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜: insurtech@example.com

---

**Made with â¤ï¸ by InsurTech Team**
