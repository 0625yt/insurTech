{
  "name": "ğŸ§ª í…ŒìŠ¤íŠ¸ - ê¸°ë³¸ ë™ì‘ í™•ì¸",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "â–¶ï¸ ìˆ˜ë™ ì‹¤í–‰",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [0, 300]
    },
    {
      "parameters": {
        "jsCode": "// í…ŒìŠ¤íŠ¸ìš© ì²­êµ¬ ë°ì´í„° ìƒì„±\nconst testClaim = {\n  id: 1,\n  claim_number: 'CLM-2024-000001',\n  policy_number: 'POL-2024-001',\n  customer_name: 'í™ê¸¸ë™',\n  claim_type: 'HOSPITALIZATION',\n  diagnosis_code: 'K35.0',\n  diagnosis_name: 'ê¸‰ì„± ì¶©ìˆ˜ì—¼',\n  hospital_name: 'ì„œìš¸ëŒ€í•™êµë³‘ì›',\n  treatment_start_date: '2024-01-10',\n  treatment_end_date: '2024-01-15',\n  hospitalization_days: 5,\n  total_medical_expense: 2500000,\n  insured_expense: 2000000,\n  uninsured_expense: 500000,\n  created_at: new Date().toISOString()\n};\n\nreturn {\n  success: true,\n  message: 'í…ŒìŠ¤íŠ¸ ì²­êµ¬ ë°ì´í„° ìƒì„± ì™„ë£Œ',\n  claim: testClaim\n};"
      },
      "id": "generate-test-data",
      "name": "ğŸ“ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [220, 300]
    },
    {
      "parameters": {
        "jsCode": "// ì •ì±… ìœ íš¨ì„± ê²€ì¦ ì‹œë®¬ë ˆì´ì…˜\nconst claim = $input.first().json.claim;\n\nconst policy = {\n  id: 1,\n  policy_number: claim.policy_number,\n  product_code: 'MED-001',\n  product_name: 'ë¬´ë°°ë‹¹ ê±´ê°•ë³´í—˜',\n  status: 'ACTIVE',\n  coverage_start_date: '2023-01-01',\n  coverage_end_date: '2033-12-31',\n  customer: {\n    id: 1,\n    name: claim.customer_name,\n    email: 'hong@example.com',\n    risk_grade: 'NORMAL'\n  }\n};\n\n// ìœ íš¨ì„± ê²€ì¦\nconst today = new Date();\nconst coverageStart = new Date(policy.coverage_start_date);\nconst coverageEnd = new Date(policy.coverage_end_date);\nconst treatmentDate = new Date(claim.treatment_start_date);\n\nconst isValid = policy.status === 'ACTIVE' && \n               treatmentDate >= coverageStart && \n               treatmentDate <= coverageEnd;\n\nreturn {\n  isValid: isValid,\n  policy: policy,\n  claim: claim,\n  issues: isValid ? [] : ['ë³´ì¥ê¸°ê°„ ì™¸ ì²­êµ¬']\n};"
      },
      "id": "validate-policy",
      "name": "ğŸ” ì •ì±… ìœ íš¨ì„± ê²€ì¦",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "valid-check",
              "leftValue": "={{ $json.isValid }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-valid",
      "name": "ğŸ”€ ìœ íš¨ì„± ì²´í¬",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [660, 300]
    },
    {
      "parameters": {
        "jsCode": "// ë‹´ë³´ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜\nconst data = $input.first().json;\nconst claim = data.claim;\n\nconst coverages = [\n  {\n    id: 1,\n    name: 'ì…ì›ì¼ë‹¹',\n    code: 'HOS-DAILY',\n    type: 'FIXED',\n    daily_amount: 50000,\n    max_days: 180\n  },\n  {\n    id: 2,\n    name: 'ì…ì›ì˜ë£Œë¹„',\n    code: 'HOS-MEDICAL',\n    type: 'REAL_LOSS',\n    insured_amount: 5000000,\n    deductible_rate: 0.1,\n    payout_rate: 0.9\n  }\n];\n\nconst breakdown = [];\nlet totalApproved = 0;\n\n// ì…ì›ì¼ë‹¹ ê³„ì‚°\nconst dailyCov = coverages.find(c => c.code === 'HOS-DAILY');\nif (dailyCov && claim.hospitalization_days) {\n  const days = Math.min(claim.hospitalization_days, dailyCov.max_days);\n  const amount = dailyCov.daily_amount * days;\n  breakdown.push({\n    coverage: dailyCov.name,\n    calculation: `${dailyCov.daily_amount.toLocaleString()}ì› Ã— ${days}ì¼`,\n    approved: amount\n  });\n  totalApproved += amount;\n}\n\n// ì…ì›ì˜ë£Œë¹„ ê³„ì‚°\nconst medCov = coverages.find(c => c.code === 'HOS-MEDICAL');\nif (medCov && claim.insured_expense) {\n  const afterDeductible = claim.insured_expense * (1 - medCov.deductible_rate);\n  const amount = Math.min(afterDeductible * medCov.payout_rate, medCov.insured_amount);\n  breakdown.push({\n    coverage: medCov.name,\n    calculation: `${claim.insured_expense.toLocaleString()}ì› Ã— 90% Ã— 90%`,\n    approved: Math.round(amount)\n  });\n  totalApproved += Math.round(amount);\n}\n\nreturn {\n  claim: claim,\n  policy: data.policy,\n  coverages: coverages,\n  breakdown: breakdown,\n  totalApproved: totalApproved,\n  totalRejected: claim.total_medical_expense - totalApproved\n};"
      },
      "id": "analyze-coverage",
      "name": "ğŸ“Š ë‹´ë³´ ë¶„ì„",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [880, 200]
    },
    {
      "parameters": {
        "jsCode": "// AI ì‹¬ì‚¬ ì‹œë®¬ë ˆì´ì…˜ (GPT ì—†ì´)\nconst data = $input.first().json;\n\n// ëœë¤ ì‹ ë¢°ë„ ìƒì„± (0.7 ~ 0.95)\nconst confidence = 0.7 + Math.random() * 0.25;\n\n// ìŠ¹ì¸/ê±°ì ˆ/ê²€í†  ê²°ì •\nlet recommendation = 'APPROVE';\nif (data.totalApproved < data.claim.total_medical_expense * 0.3) {\n  recommendation = 'REVIEW';\n}\n\nconst aiResults = [\n  {\n    model: 'GPT-4o (ì‹œë®¬ë ˆì´ì…˜)',\n    recommendation: recommendation,\n    confidence: confidence,\n    reasoning: 'ì²­êµ¬ ë‚´ì—­ì´ ì•½ê´€ ê¸°ì¤€ì— ë¶€í•©í•©ë‹ˆë‹¤.'\n  },\n  {\n    model: 'Claude (ì‹œë®¬ë ˆì´ì…˜)',\n    recommendation: recommendation,\n    confidence: confidence + 0.02,\n    reasoning: 'ë‹´ë³´ ì ìš©ì´ ì ì ˆí•©ë‹ˆë‹¤.'\n  },\n  {\n    model: 'Gemini (ì‹œë®¬ë ˆì´ì…˜)',\n    recommendation: recommendation,\n    confidence: confidence - 0.01,\n    reasoning: 'ì •ìƒì ì¸ ì²­êµ¬ë¡œ íŒë‹¨ë©ë‹ˆë‹¤.'\n  }\n];\n\nreturn {\n  ...data,\n  aiResults: aiResults,\n  finalRecommendation: recommendation,\n  avgConfidence: Math.round((confidence + 0.01) * 100) / 100\n};"
      },
      "id": "ai-simulation",
      "name": "ğŸ¤– AI ì‹¬ì‚¬ (ì‹œë®¬ë ˆì´ì…˜)",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1100, 200]
    },
    {
      "parameters": {
        "jsCode": "// ì‚¬ê¸° íƒì§€ ì‹œë®¬ë ˆì´ì…˜\nconst data = $input.first().json;\nconst claim = data.claim;\n\nlet fraudScore = 0;\nconst patterns = [];\n\n// íŒ¨í„´ 1: ê³ ì•¡ ì²­êµ¬ ì²´í¬\nif (claim.total_medical_expense > 3000000) {\n  fraudScore += 10;\n  patterns.push({\n    name: 'ê³ ì•¡ì²­êµ¬',\n    score: 10,\n    description: `ì²­êµ¬ì•¡ ${claim.total_medical_expense.toLocaleString()}ì›`\n  });\n}\n\n// íŒ¨í„´ 2: ì…ì›ì¼ìˆ˜ ì²´í¬\nif (claim.hospitalization_days > 14) {\n  fraudScore += 5;\n  patterns.push({\n    name: 'ì¥ê¸°ì…ì›',\n    score: 5,\n    description: `${claim.hospitalization_days}ì¼ ì…ì›`\n  });\n}\n\n// ìœ„í—˜ë„ ê²°ì •\nlet riskLevel = 'LOW';\nlet action = 'APPROVE';\n\nif (fraudScore >= 50) {\n  riskLevel = 'HIGH';\n  action = 'INVESTIGATE';\n} else if (fraudScore >= 30) {\n  riskLevel = 'MEDIUM';\n  action = 'REVIEW';\n}\n\nreturn {\n  ...data,\n  fraudDetection: {\n    totalScore: fraudScore,\n    riskLevel: riskLevel,\n    recommendedAction: action,\n    patterns: patterns\n  }\n};"
      },
      "id": "fraud-detection",
      "name": "ğŸš¨ ì‚¬ê¸° íƒì§€ (ì‹œë®¬ë ˆì´ì…˜)",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1320, 200]
    },
    {
      "parameters": {
        "jsCode": "// ìµœì¢… ê²°ê³¼ ìƒì„±\nconst data = $input.first().json;\n\nconst result = {\n  success: true,\n  timestamp: new Date().toISOString(),\n  summary: {\n    claimNumber: data.claim.claim_number,\n    customerName: data.claim.customer_name,\n    claimType: data.claim.claim_type,\n    diagnosisName: data.claim.diagnosis_name,\n    hospitalName: data.claim.hospital_name\n  },\n  financials: {\n    totalClaimed: data.claim.total_medical_expense,\n    totalApproved: data.totalApproved,\n    totalRejected: data.totalRejected,\n    approvalRate: Math.round((data.totalApproved / data.claim.total_medical_expense) * 100) + '%'\n  },\n  aiAnalysis: {\n    recommendation: data.finalRecommendation,\n    confidence: data.avgConfidence,\n    models: data.aiResults.length\n  },\n  fraudDetection: {\n    score: data.fraudDetection.totalScore,\n    riskLevel: data.fraudDetection.riskLevel,\n    action: data.fraudDetection.recommendedAction,\n    patterns: data.fraudDetection.patterns.length\n  },\n  breakdown: data.breakdown\n};\n\nreturn result;"
      },
      "id": "final-result",
      "name": "ğŸ“‹ ìµœì¢… ê²°ê³¼ ìƒì„±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1540, 200]
    },
    {
      "parameters": {
        "jsCode": "// ê²°ê³¼ë¥¼ ë³´ê¸° ì¢‹ê²Œ ì¶œë ¥\nconst result = $input.first().json;\n\nconsole.log('='.repeat(50));\nconsole.log('ğŸ¥ ë³´í—˜ê¸ˆ ì²­êµ¬ ì‹¬ì‚¬ ê²°ê³¼');\nconsole.log('='.repeat(50));\nconsole.log('');\nconsole.log('ğŸ“‹ ì²­êµ¬ ì •ë³´');\nconsole.log(`   ì²­êµ¬ë²ˆí˜¸: ${result.summary.claimNumber}`);\nconsole.log(`   ê³ ê°ëª…: ${result.summary.customerName}`);\nconsole.log(`   ì²­êµ¬ìœ í˜•: ${result.summary.claimType}`);\nconsole.log(`   ì§„ë‹¨ëª…: ${result.summary.diagnosisName}`);\nconsole.log(`   ë³‘ì›ëª…: ${result.summary.hospitalName}`);\nconsole.log('');\nconsole.log('ğŸ’° ê¸ˆì•¡ ë¶„ì„');\nconsole.log(`   ì´ ì²­êµ¬ì•¡: ${result.financials.totalClaimed.toLocaleString()}ì›`);\nconsole.log(`   ìŠ¹ì¸ ê¸ˆì•¡: ${result.financials.totalApproved.toLocaleString()}ì›`);\nconsole.log(`   ê±°ì ˆ ê¸ˆì•¡: ${result.financials.totalRejected.toLocaleString()}ì›`);\nconsole.log(`   ìŠ¹ì¸ìœ¨: ${result.financials.approvalRate}`);\nconsole.log('');\nconsole.log('ğŸ¤– AI ë¶„ì„');\nconsole.log(`   ì¶”ì²œ: ${result.aiAnalysis.recommendation}`);\nconsole.log(`   ì‹ ë¢°ë„: ${(result.aiAnalysis.confidence * 100).toFixed(1)}%`);\nconsole.log('');\nconsole.log('ğŸš¨ ì‚¬ê¸° íƒì§€');\nconsole.log(`   ì ìˆ˜: ${result.fraudDetection.score}ì `);\nconsole.log(`   ìœ„í—˜ë„: ${result.fraudDetection.riskLevel}`);\nconsole.log(`   ê¶Œì¥ì¡°ì¹˜: ${result.fraudDetection.action}`);\nconsole.log('');\nconsole.log('='.repeat(50));\nconsole.log('âœ… ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì„±ê³µ!');\nconsole.log('='.repeat(50));\n\nreturn result;"
      },
      "id": "output-result",
      "name": "ğŸ“¤ ê²°ê³¼ ì¶œë ¥",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1760, 200]
    },
    {
      "parameters": {
        "jsCode": "// ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ ì²˜ë¦¬\nconst data = $input.first().json;\n\nreturn {\n  success: false,\n  message: 'ì •ì±… ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨',\n  issues: data.issues,\n  claim: data.claim\n};"
      },
      "id": "invalid-result",
      "name": "âŒ ê²€ì¦ ì‹¤íŒ¨",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [880, 400]
    }
  ],
  "connections": {
    "â–¶ï¸ ìˆ˜ë™ ì‹¤í–‰": {
      "main": [
        [
          {
            "node": "ğŸ“ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±": {
      "main": [
        [
          {
            "node": "ğŸ” ì •ì±… ìœ íš¨ì„± ê²€ì¦",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ” ì •ì±… ìœ íš¨ì„± ê²€ì¦": {
      "main": [
        [
          {
            "node": "ğŸ”€ ìœ íš¨ì„± ì²´í¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ”€ ìœ íš¨ì„± ì²´í¬": {
      "main": [
        [
          {
            "node": "ğŸ“Š ë‹´ë³´ ë¶„ì„",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "âŒ ê²€ì¦ ì‹¤íŒ¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“Š ë‹´ë³´ ë¶„ì„": {
      "main": [
        [
          {
            "node": "ğŸ¤– AI ì‹¬ì‚¬ (ì‹œë®¬ë ˆì´ì…˜)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¤– AI ì‹¬ì‚¬ (ì‹œë®¬ë ˆì´ì…˜)": {
      "main": [
        [
          {
            "node": "ğŸš¨ ì‚¬ê¸° íƒì§€ (ì‹œë®¬ë ˆì´ì…˜)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸš¨ ì‚¬ê¸° íƒì§€ (ì‹œë®¬ë ˆì´ì…˜)": {
      "main": [
        [
          {
            "node": "ğŸ“‹ ìµœì¢… ê²°ê³¼ ìƒì„±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“‹ ìµœì¢… ê²°ê³¼ ìƒì„±": {
      "main": [
        [
          {
            "node": "ğŸ“¤ ê²°ê³¼ ì¶œë ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5",
  "meta": {
    "instanceId": "insurtech-n8n"
  },
  "tags": [
    {
      "name": "í…ŒìŠ¤íŠ¸",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    }
  ]
}
